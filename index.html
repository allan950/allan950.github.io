<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" type="text/css" href="src/style.css" />
    <!-- <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js"></script> -->
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
</head>
<body >
    <header></header>

    <div id="navbar"></div>
    
    <div class="color-picker">
        <div>
            <div class="object-container">
                <div class="color-selector-button"></div>
                <div class="selector" onclick="checkButton(event)">
                    <div class="style-color-button" id="purple-neon-style" role="button" style="width: 40px;height: 40px;background-color: purple;border-radius: 50%;margin: 0 10px;"></div>
                    <div class="style-color-button" id="red-neon-style" role="button" data-color-pick="red" style="width: 40px;height: 40px;background-color: red;border-radius: 50%;margin: 0 10px;box-shadow: #e35f5f inset 0px -8px 20px;"></div>
                    <div class="style-color-button"></div>
                    <div class="style-color-button"></div>
                </div>
            </div>
        </div>
    </div>
    <script>
        var savedButton;

        function checkButton(event) {
            savedButton = event.target;

            var faceReal = $(".three-dimensional-neon-structure .face");

            var regex = new RegExp(/rgb\([0-9]{1,3}, [0-9]{1,3}, [0-9]{1,3}\)/g);
            var regex2 = new RegExp(/rgba\([0-9]{1,3}, [0-9]{1,3}, [0-9]{1,3}, [0-9]{1}\.\d{1}\)/g);

            console.log(faceReal.css("box-shadow").match(regex));
            //var newCol = faceReal.css("box-shadow").replace(regex, "var(--red)").replace(regex2, "var(--red)");
            //console.log(faceReal.css("box-shadow").replace(regex, "var(--red)").replace(regex2, "var(--var)"));
            //faceReal.css("box-shadow", newCol);
            console.log(faceReal);

            var colorButtons = document.querySelectorAll(".color-picker .style-color-button");
            for (var i = 0; i < colorButtons.length; i++) {
                colorButtons[i];
                if (colorButtons[i] === savedButton) {
                    let buttonAttr = colorButtons[i].getAttribute("data-color-pick");
                    console.log(buttonAttr);
                    document.body.setAttribute("data-set-neon-style", buttonAttr);
                }
            }

            var getBodyAttr = document.body.getAttribute("data-set-neon-style");
            var neonElements = document.querySelectorAll("[data-neon-style]")
            var $neonElements = $("[data-neon-style]");
            let boxShadow;
            let val = 0;
            console.log(neonElements);

            for (var i = 0; i < neonElements.length; i++) {
                neonElements[i].setAttribute("data-neon-style", getBodyAttr);
                //$neonElements[i].setAttribute("data-neon-style", getBodyAttr);
                console.log(neonElements[i].style.color);
                neonElements[i].style.color = "var(--" + getBodyAttr + ")";
                if (neonElements[i].tagName != "SPAN") {
                    neonElements[i].style.backgroundColor = "var(--" + getBodyAttr + ")";
                    neonElements[i].style.textShadow = "var(--" + getBodyAttr + ")";
                    //boxShadow = $neonElements.css("text-shadow");
                    //console.log(boxShadow);
                    //neonElements[i].style.boxShadow = boxShadow;
                    console.log($(".face[data-neon-style]").css("box-shadow"));
                    boxShadow = $(".face[data-neon-style]").css("box-shadow").replace(regex, "var(--red)").replace(regex, match => ++val === 2 ? `var(--${getBodyAttr}-box-shadow)` : match);
                    console.log(boxShadow);
                    neonElements[i].style.boxShadow = boxShadow;

                    /*if (neonElements[i].classList === "face") {
                        var newColor = $neonElements.css("box-shadow").replace(regex, "var(--red)").replace(regex2, "var(--red)");
                        console.log(newColor);
                        $neonElements.css("box-shadow", newColor);
                    }*/
                }
            }

            //var newColor = $neonElements.css("box-shadow").replace(regex, "var(--red)").replace(regex2, "var(--red)");
            //console.log(newColor);
            //$neonElements.css("box-shadow", newColor);

            //return savedButton;
        }

        /*document.querySelectorAll(".color-picker .style-color-button").addEventListener("click", function (event) {
            evt = event.target;
            console.log(evt);
        })*/
    </script>
    <script>
        //let visitCount = 0

        const counter = document.querySelector("#pageVisitCount");

        var visitCount = localStorage.getItem("visitCount");

        // Check if page_view entry is present
        if (visitCount) {
            visitCount = Number(visitCount) + 1;
            localStorage.setItem("visitCount", visitCount);
        } else {
            visitCount = 1;
            localStorage.setItem("visitCount", 1);
        }
        counter.innerHTML = visitCount;
    </script>
    <main class="fixed-visual-size">
        <div class="home-page">
            <div>
            <div class="heading">
                <h1>i'm <span data-neon-style="blue">allan kitsoukou</span></h1>
                <hr />
                <h4>web developer</h4>
                <h4>Mobile app developer</h4>
            </div>
            <!--<div style="display: flex;align-items: center;justify-content: center;height: 520px;z-index: 1;position: relative;">
                <img src="Logo.png" style="width: 470px;display: none;">
                <div class="neon-pillar">
                    <div class="three-dimensional-effect">
                        <div class="figure-side face"></div>
                        <div class="figure-side right"></div>
                        <div class="figure-side left"></div>
                        <div class="figure-side back"></div>
                        <div class="figure-side top"></div>
                        <div class="figure-side bottom"></div>
                    </div>
                </div>
            </div>-->
            <div id="site_logo" style="position: relative;height: 400px;/*padding-left: 200px;*/overflow-y: clip;"></div>
        </div>
        </div>

    </main>

    <div id="page-footer"></div>

    <script>
        navColor = "blue";
        themeColor = "blue";
    </script>


    <script src="./src/js/footer.js"></script>
    <script src="./src/js/navbar.js"></script>
    <script>
        $('#site_logo').load('src/components/3d-logo.html');
    </script>
</body>
</html>